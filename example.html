<html>
    <head>

        <title>OpenEye javascript example</title>

<style>

body{
    font-family: Arial;
    font-size: 1.4rem;
}

input{ font-size: 1.4rem; }


#dot{
    position: absolute;
    left: 50%;
    top: 50%;
    width: 4rem;
    height: 4rem;
    border-radius: 2rem;
    background: #6495ED;
}

</style>

    </head>
    <body>
        <h1>OpenEye browser connect example</h1>
        <!-- input to select the device to connect to --> 
        <input size=15 id="deviceIp" type="text" placeholder="OpenEye ip address">
        <input size=30 id="deviceId" type="text" placeholder="OpenEye device id">
        <a href="#1" onclick="connect()">connect</a>
        <br>
        <p id="status">Enter your device id to connect to your OpenEye device in the browser</p>

        <!-- this is the dot that will be moved by moving your eyes -->
        <div id="dot"></div>


        <!-- import MQTT library for the socket connection to OpenEye -->
        <script src="src/paho-mqtt.js"></script>
        <!-- import OpenEye javascript client -->
        <script src="src/openeye.js"></script>

        <!-- connect to an OpenEye device -->
        <script> 
            var openeye = {}; 

            // simple function to show the connection status to the user
            function setStatus(msg){
                document.getElementById("status").innerHTML = msg;
            }

            function connect(){
                // read the device id
                var ipAddress = document.getElementById("deviceIp").value;
                var deviceId = document.getElementById("deviceId").value;

                // init OpenEye
                openeye = new OpenEye(ipAddress, deviceId);
                // set status callback
                openeye.statusCallback = function setStatus(msg){
                    document.getElementById("status").innerHTML = msg;
                }
                // set callback for when the eye moves
                openeye.positionCallback = function setStatus(x, y){
                    console.log(x, y);
                    var dot = document.getElementById("dot");
                    dot.style.left = (50-x*80)+"%";
                    dot.style.top = (50+y*80)+"%";
                    dot.innerHTML = x+"<br>"+y;
                }
                // connect to device
                openeye.connect();
            }
            

        </script>

    </body>
</html>
